---
layout: single
title:  "FunASR - åŸºç¡€è¯­éŸ³è¯†åˆ«å·¥å…·åŒ…"
date:   2025-11-21 08:00:00 +0800
categories: FunASR ASR
tags: [FunASR, ASR]
---

[FunASR](https://www.funasr.com/) æ˜¯ä¸€ä¸ªåŸºç¡€è¯­éŸ³è¯†åˆ«å·¥å…·åŒ…ï¼Œæä¾›å¤šç§åŠŸèƒ½ï¼ŒåŒ…æ‹¬è¯­éŸ³è¯†åˆ«ï¼ˆASRï¼‰ã€è¯­éŸ³ç«¯ç‚¹æ£€æµ‹ï¼ˆVADï¼‰ã€æ ‡ç‚¹æ¢å¤ã€è¯­è¨€æ¨¡å‹ã€è¯´è¯äººéªŒè¯ã€è¯´è¯äººåˆ†ç¦»å’Œå¤šäººå¯¹è¯è¯­éŸ³è¯†åˆ«ç­‰ã€‚

<!--more-->

## FunASR å¿«é€Ÿå…¥é—¨

### æ ¸å¿ƒåŠŸèƒ½

![](/images/2025/FunASR/core.png)

### å·¥ä½œæµç¨‹

![](/images/2025/FunASR/funasr_overview.png)

### ç¦»çº¿æ–‡ä»¶è½¬å†™æœåŠ¡

![](/images/2025/FunASR/offline_structure.jpg)

FunASRç¦»çº¿æ–‡ä»¶è½¬å†™è½¯ä»¶åŒ…ï¼Œæä¾›äº†ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„è¯­éŸ³ç¦»çº¿æ–‡ä»¶è½¬å†™æœåŠ¡ã€‚æ‹¥æœ‰å®Œæ•´çš„è¯­éŸ³è¯†åˆ«é“¾è·¯ï¼Œç»“åˆäº†è¯­éŸ³ç«¯ç‚¹æ£€æµ‹ã€è¯­éŸ³è¯†åˆ«ã€æ ‡ç‚¹ç­‰æ¨¡å‹ï¼Œå¯ä»¥å°†å‡ åä¸ªå°æ—¶çš„é•¿éŸ³é¢‘ä¸è§†é¢‘è¯†åˆ«æˆå¸¦æ ‡ç‚¹çš„æ–‡å­—ï¼Œè€Œä¸”æ”¯æŒä¸Šç™¾è·¯è¯·æ±‚åŒæ—¶è¿›è¡Œè½¬å†™ã€‚è¾“å‡ºä¸ºå¸¦æ ‡ç‚¹çš„æ–‡å­—ï¼Œå«æœ‰å­—çº§åˆ«æ—¶é—´æˆ³ï¼Œæ”¯æŒITNä¸ç”¨æˆ·è‡ªå®šä¹‰çƒ­è¯ç­‰ã€‚æœåŠ¡ç«¯é›†æˆæœ‰ffmpegï¼Œæ”¯æŒå„ç§éŸ³è§†é¢‘æ ¼å¼è¾“å…¥ã€‚è½¯ä»¶åŒ…æä¾›æœ‰htmlã€pythonã€c++ã€javaä¸c#ç­‰å¤šç§ç¼–ç¨‹è¯­è¨€å®¢æˆ·ç«¯ã€‚

### å®æ—¶å¬å†™æœåŠ¡

![](/images/2025/FunASR/online_structure.png)

FunASRå®æ—¶è¯­éŸ³å¬å†™è½¯ä»¶åŒ…ï¼Œé›†æˆäº†å®æ—¶ç‰ˆæœ¬çš„è¯­éŸ³ç«¯ç‚¹æ£€æµ‹æ¨¡å‹ã€è¯­éŸ³è¯†åˆ«ã€è¯­éŸ³è¯†åˆ«ã€æ ‡ç‚¹é¢„æµ‹æ¨¡å‹ç­‰ã€‚é‡‡ç”¨å¤šæ¨¡å‹ååŒï¼Œæ—¢å¯ä»¥å®æ—¶çš„è¿›è¡Œè¯­éŸ³è½¬æ–‡å­—ï¼Œä¹Ÿå¯ä»¥åœ¨è¯´è¯å¥å°¾ç”¨é«˜ç²¾åº¦è½¬å†™æ–‡å­—ä¿®æ­£è¾“å‡ºï¼Œè¾“å‡ºæ–‡å­—å¸¦æœ‰æ ‡ç‚¹ï¼Œæ”¯æŒå¤šè·¯è¯·æ±‚ã€‚ä¾æ®ä½¿ç”¨è€…åœºæ™¯ä¸åŒï¼Œæ”¯æŒå®æ—¶è¯­éŸ³å¬å†™æœåŠ¡ï¼ˆonlineï¼‰ã€éå®æ—¶ä¸€å¥è¯è½¬å†™ï¼ˆofflineï¼‰ä¸å®æ—¶ä¸éå®æ—¶ä¸€ä½“åŒ–ååŒï¼ˆ2passï¼‰3ç§æœåŠ¡æ¨¡å¼ã€‚è½¯ä»¶åŒ…æä¾›æœ‰htmlã€pythonã€c++ã€javaä¸c#ç­‰å¤šç§ç¼–ç¨‹è¯­è¨€å®¢æˆ·ç«¯ã€‚

### FunASR é•œåƒ

- åœ¨çº¿ CPU ç‰ˆæœ¬

```bash
docker pull registry.cn-hangzhou.aliyuncs.com/funasr_repo/funasr:funasr-runtime-sdk-online-cpu-0.1.13
```

- ç¦»çº¿ GPU ç‰ˆæœ¬

```bash
docker pull registry.cn-hangzhou.aliyuncs.com/funasr_repo/funasr:funasr-runtime-sdk-gpu-0.2.1
```

### éƒ¨ç½² FunASR æœåŠ¡

#### åˆ›å»ºæ¨¡å‹å­˜å‚¨ç›®å½•

- macOS

```bash
mkdir -p ~/GitHub/FunASR/funasr-runtime-resources/models
```

- Ubuntu (Jetson Thor)

```bash
mkdir -p /models/FunASR/funasr-runtime-resources/models
```

#### è¿è¡Œå®¹å™¨

- macOS

```bash
docker run -p 10095:10095 -it --name funasr --privileged=true \
  -v ~/GitHub/FunASR/funasr-runtime-resources/models:/workspace/models \
  registry.cn-hangzhou.aliyuncs.com/funasr_repo/funasr:funasr-runtime-sdk-online-cpu-0.1.13 \
  bash
```

- Ubuntu (Jetson Thor)

```bash
docker run -p 10095:10095 -it --name funasr --privileged=true \
  -v /models/FunASR/funasr-runtime-resources/models:/workspace/models \
  registry.cn-hangzhou.aliyuncs.com/funasr_repo/funasr:funasr-runtime-sdk-online-cpu-0.1.13 \
  bash
```

#### å®‰è£… ffmpeg

```bash
apt update && apt install ffmpeg -y
```

#### è¿è¡ŒæœåŠ¡ï¼ˆ2pass æ¨¡å¼ï¼‰

##### è”ç½‘

```bash
cd FunASR/runtime

bash run_server_2pass.sh \
  --download-model-dir /workspace/models \
  --vad-dir damo/speech_fsmn_vad_zh-cn-16k-common-onnx \
  --model-dir damo/speech_paraformer-large-vad-punc_asr_nat-zh-cn-16k-common-vocab8404-onnx \
  --online-model-dir damo/speech_paraformer-large_asr_nat-zh-cn-16k-common-vocab8404-online-onnx \
  --punc-dir damo/punc_ct-transformer_zh-cn-common-vad_realtime-vocab272727-onnx \
  --lm-dir damo/speech_ngram_lm_zh-cn-ai-wesp-fst \
  --itn-dir thuduj12/fst_itn_zh \
  --hotword /workspace/models/hotwords.txt \
  --certfile 0
```

##### å†…ç½‘

```bash
cd FunASR/runtime

bash run_server_2pass.sh \
  --vad-dir /workspace/models/damo/speech_fsmn_vad_zh-cn-16k-common-onnx \
  --model-dir /workspace/models/damo/speech_paraformer-large-vad-punc_asr_nat-zh-cn-16k-common-vocab8404-onnx \
  --online-model-dir /workspace/models/damo/speech_paraformer-large_asr_nat-zh-cn-16k-common-vocab8404-online-onnx \
  --punc-dir /workspace/models/damo/punc_ct-transformer_zh-cn-common-vad_realtime-vocab272727-onnx \
  --lm-dir /workspace/models/damo/speech_ngram_lm_zh-cn-ai-wesp-fst \
  --itn-dir /workspace/models/thuduj12/fst_itn_zh \
  --hotword /workspace/models/hotwords.txt \
  --certfile 0
```

### æµ‹è¯•

#### ä¸‹è½½ä¾‹å­

```bash
wget https://isv-data.oss-cn-hangzhou.aliyuncs.com/ics/MaaS/ASR/sample/funasr_samples.tar.gz
tar xzvf funasr_samples.tar.gz
```

#### æ‰“å¼€å®¢æˆ·ç«¯

```bash
open samples/html/static/index.html
```

![](/images/2025/FunASR/demo.png)


## å†…ç½‘éƒ¨ç½²

è¿›å…¥ç›®å½•ï¼š`/models/FunASR`

### ç¼–å†™ Dockerfile

```Dockerfile
# 1. æŒ‡å®šåŸºç¡€é•œåƒ
FROM registry.cn-hangzhou.aliyuncs.com/funasr_repo/funasr:funasr-runtime-sdk-online-cpu-0.1.13

# 2. æ›´æ–°æºå¹¶å®‰è£… ffmpeg
# ä½¿ç”¨ apt-get å¹¶æ¸…ç†ç¼“å­˜ä»¥å‡å°é•œåƒä½“ç§¯
#RUN apt-get update && \
#    apt-get install -y ffmpeg && \
#    rm -rf /var/lib/apt/lists/*

# 3. æ‹·è´æ¨¡å‹æ–‡ä»¶
# å‡è®¾ä½ çš„æ„å»ºç›®å½•ç»“æ„ä¸º ./funasr-runtime-resources/models
COPY funasr-runtime-resources/models /workspace/models

# 4. è®¾ç½®å·¥ä½œç›®å½•
WORKDIR /workspace/FunASR/runtime

# 5. (å¯é€‰) æš´éœ²ç«¯å£
# FunASR é»˜è®¤é€šå¸¸ä½¿ç”¨ 10095ï¼Œå¦‚æœè„šæœ¬ä¸­æœ‰ä¿®æ”¹è¯·å¯¹åº”è°ƒæ•´
EXPOSE 10095

# 6. å¯åŠ¨å‘½ä»¤ (ä¸èƒ½æˆåŠŸè¿è¡Œï¼Œå› ä¸º /workspace/FunASR/runtime/run_server_2pass.sh å†…ä½¿ç”¨ & ç¬¦å·ï¼Œè¿›è¡Œå®¹å™¨å†…è¿è¡Œä¸‹é¢å‘½ä»¤ã€‚)
# CMD bash /workspace/FunASR/runtime/run_server_2pass.sh \
#   --vad-dir /workspace/models/damo/speech_fsmn_vad_zh-cn-16k-common-onnx \
#   --model-dir /workspace/models/damo/speech_paraformer-large-vad-punc_asr_nat-zh-cn-16k-common-vocab8404-onnx \
#   --online-model-dir /workspace/models/damo/speech_paraformer-large_asr_nat-zh-cn-16k-common-vocab8404-online-onnx \
#   --punc-dir /workspace/models/damo/punc_ct-transformer_zh-cn-common-vad_realtime-vocab272727-onnx \
#   --lm-dir /workspace/models/damo/speech_ngram_lm_zh-cn-ai-wesp-fst \
#   --itn-dir /workspace/models/thuduj12/fst_itn_zh \
#   --hotword /workspace/models/hotwords.txt \
#   --certfile 0
```

### æ„å»ºé•œåƒ

```bash
docker build -t wangjunjian/funasr-runtime-sdk-online-cpu-0.1.13 .
```

### è¿è¡Œå®¹å™¨

```bash
docker run -it -p 10095:10095 --name funasr-server \
  wangjunjian/funasr-runtime-sdk-online-cpu-0.1.13 bash
```

### è¿è¡ŒæœåŠ¡ï¼ˆå®¹å™¨å†…ï¼‰

```bash
CMD bash /workspace/FunASR/runtime/run_server_2pass.sh \
  --vad-dir /workspace/models/damo/speech_fsmn_vad_zh-cn-16k-common-onnx \
  --model-dir /workspace/models/damo/speech_paraformer-large-vad-punc_asr_nat-zh-cn-16k-common-vocab8404-onnx \
  --online-model-dir /workspace/models/damo/speech_paraformer-large_asr_nat-zh-cn-16k-common-vocab8404-online-onnx \
  --punc-dir /workspace/models/damo/punc_ct-transformer_zh-cn-common-vad_realtime-vocab272727-onnx \
  --lm-dir /workspace/models/damo/speech_ngram_lm_zh-cn-ai-wesp-fst \
  --itn-dir /workspace/models/thuduj12/fst_itn_zh \
  --hotword /workspace/models/hotwords.txt \
  --certfile 0
```


## æœ¬åœ°éƒ¨ç½²ï¼ˆmacOSï¼‰

### åˆ›å»ºå¹¶æ¿€æ´» Conda ç¯å¢ƒ

```bash
conda create -n funasr python=3.10.9 -y
conda activate funasr
```

### å…‹éš†ä»£ç åº“

```bash
git clone https://github.com/modelscope/FunASR
cd FunASR
```

### å®‰è£…ä¾èµ–

```bash
# -i https://pypi.tuna.tsinghua.edu.cn/simple
pip install -r runtime/python/http/requirements.txt
pip install "fastapi[standard]"
pip install funasr_onnx funasr_torch
```

### æ¨¡å‹ç¼“å­˜è·¯å¾„
| æ¨¡å‹ | æœ¬åœ°ç¼“å­˜è·¯å¾„ | è¯´æ˜ |
| ---- | ----------- | ---- |
| paraformer-zh-streaming | ~/.cache/modelscope/hub/models/iic/speech_paraformer-large_asr_nat-zh-cn-16k-common-vocab8404-online | å¤§å‹ä¸­æ–‡åœ¨çº¿è¯­éŸ³è¯†åˆ«æ¨¡å‹ |
| paraformer-zh | ~/.cache/modelscope/hub/models/iic/speech_seaco_paraformer_large_asr_nat-zh-cn-16k-common-vocab8404-pytorch | å¤§å‹ä¸­æ–‡è¯­éŸ³è¯†åˆ«æ¨¡å‹ |
| fsmn-vad | ~/.cache/modelscope/hub/models/iic/speech_fsmn_vad_zh-cn-16k-common-pytorch | ä¸­æ–‡è¯­éŸ³ç«¯ç‚¹æ£€æµ‹æ¨¡å‹ |
| ct-punc | ~/.cache/modelscope/hub/models/iic/punc_ct-transformer_cn-en-common-vocab471067-large | ä¸­è‹±æ–‡æ ‡ç‚¹æ¢å¤æ¨¡å‹ |
| cam++ | ~/.cache/modelscope/hub/models/iic/speech_campplus_sv_zh-cn_16k-common | ä¸­æ–‡è¯´è¯äººéªŒè¯æ¨¡å‹ |


## æ¨¡å‹

ï¼ˆæ³¨ï¼šâ­ è¡¨ç¤ºModelScopeæ¨¡å‹ä»“åº“ï¼ŒğŸ¤— è¡¨ç¤ºHuggingfaceæ¨¡å‹ä»“åº“ï¼ŒğŸ€è¡¨ç¤ºOpenAIæ¨¡å‹ä»“åº“ï¼‰

| æ¨¡å‹åå­— | ä»»åŠ¡è¯¦æƒ… | è®­ç»ƒæ•°æ® | å‚æ•°é‡ | 
|:-------:|:------:|:-------:|:-----:|
|                                  SenseVoiceSmall <br> ([â­](https://www.modelscope.cn/models/iic/SenseVoiceSmall)  [ğŸ¤—](https://huggingface.co/FunAudioLLM/SenseVoiceSmall) )                                  |  å¤šç§è¯­éŸ³ç†è§£èƒ½åŠ›ï¼Œæ¶µç›–äº†è‡ªåŠ¨è¯­éŸ³è¯†åˆ«ï¼ˆASRï¼‰ã€è¯­è¨€è¯†åˆ«ï¼ˆLIDï¼‰ã€æƒ…æ„Ÿè¯†åˆ«ï¼ˆSERï¼‰ä»¥åŠéŸ³é¢‘äº‹ä»¶æ£€æµ‹ï¼ˆAEDï¼‰   |  400000å°æ—¶ï¼Œä¸­æ–‡   |  330M  |
|    paraformer-zh <br> ([â­](https://www.modelscope.cn/models/damo/speech_paraformer-large-vad-punc_asr_nat-zh-cn-16k-common-vocab8404-pytorch/summary)  [ğŸ¤—](https://huggingface.co/funasr/paraformer-zh) )    |  è¯­éŸ³è¯†åˆ«ï¼Œå¸¦æ—¶é—´æˆ³è¾“å‡ºï¼Œéå®æ—¶   |   60000å°æ—¶ï¼Œä¸­æ–‡   |  220M  |
| paraformer-zh-streaming <br> ( [â­](https://modelscope.cn/models/damo/speech_paraformer-large_asr_nat-zh-cn-16k-common-vocab8404-online/summary) [ğŸ¤—](https://huggingface.co/funasr/paraformer-zh-streaming) ) |      è¯­éŸ³è¯†åˆ«ï¼Œå®æ—¶       |   60000å°æ—¶ï¼Œä¸­æ–‡   |  220M  |
|         paraformer-en <br> ( [â­](https://www.modelscope.cn/models/damo/speech_paraformer-large-vad-punc_asr_nat-en-16k-common-vocab10020/summary) [ğŸ¤—](https://huggingface.co/funasr/paraformer-en) )         |      è¯­éŸ³è¯†åˆ«ï¼Œéå®æ—¶      |   50000å°æ—¶ï¼Œè‹±æ–‡   |  220M  |
|                      conformer-en <br> ( [â­](https://modelscope.cn/models/damo/speech_conformer_asr-en-16k-vocab4199-pytorch/summary) [ğŸ¤—](https://huggingface.co/funasr/conformer-en) )                      |      è¯­éŸ³è¯†åˆ«ï¼Œéå®æ—¶      |   50000å°æ—¶ï¼Œè‹±æ–‡   |  220M  |
|                        ct-punc <br> ( [â­](https://modelscope.cn/models/damo/punc_ct-transformer_cn-en-common-vocab471067-large/summary) [ğŸ¤—](https://huggingface.co/funasr/ct-punc) )                         |        æ ‡ç‚¹æ¢å¤        |   100Mï¼Œä¸­æ–‡ä¸è‹±æ–‡   |  290M  | 
|                            fsmn-vad <br> ( [â­](https://modelscope.cn/models/damo/speech_fsmn_vad_zh-cn-16k-common-pytorch/summary) [ğŸ¤—](https://huggingface.co/funasr/fsmn-vad) )                             |     è¯­éŸ³ç«¯ç‚¹æ£€æµ‹ï¼Œå®æ—¶      |  5000å°æ—¶ï¼Œä¸­æ–‡ä¸è‹±æ–‡  |  0.4M  | 
|                                                       fsmn-kws <br> ( [â­](https://modelscope.cn/models/iic/speech_charctc_kws_phone-xiaoyun/summary) )                                                        |     è¯­éŸ³å”¤é†’ï¼Œå®æ—¶      |  5000å°æ—¶ï¼Œä¸­æ–‡  |  0.7M  | 
|                              fa-zh <br> ( [â­](https://modelscope.cn/models/damo/speech_timestamp_prediction-v1-16k-offline/summary) [ğŸ¤—](https://huggingface.co/funasr/fa-zh) )                               |      å­—çº§åˆ«æ—¶é—´æˆ³é¢„æµ‹      |   50000å°æ—¶ï¼Œä¸­æ–‡   |  38M   |
|                                 cam++ <br> ( [â­](https://modelscope.cn/models/iic/speech_campplus_sv_zh-cn_16k-common/summary) [ğŸ¤—](https://huggingface.co/funasr/campplus) )                                 |      è¯´è¯äººç¡®è®¤/åˆ†å‰²      |     5000å°æ—¶     |  7.2M  | 
|                                     Whisper-large-v3 <br> ([â­](https://www.modelscope.cn/models/iic/Whisper-large-v3/summary)  [ğŸ€](https://github.com/openai/whisper) )                                      |  è¯­éŸ³è¯†åˆ«ï¼Œå¸¦æ—¶é—´æˆ³è¾“å‡ºï¼Œéå®æ—¶   |      å¤šè¯­è¨€       | 1550 M |
|                               Whisper-large-v3-turbo <br> ([â­](https://www.modelscope.cn/models/iic/Whisper-large-v3-turbo/summary)  [ğŸ€](https://github.com/openai/whisper) )                                |  è¯­éŸ³è¯†åˆ«ï¼Œå¸¦æ—¶é—´æˆ³è¾“å‡ºï¼Œéå®æ—¶   |      å¤šè¯­è¨€       | 809 M |
|                                         Qwen-Audio <br> ([â­](examples/industrial_data_pretraining/qwen_audio/demo.py)  [ğŸ¤—](https://huggingface.co/Qwen/Qwen-Audio) )                                         |  éŸ³é¢‘æ–‡æœ¬å¤šæ¨¡æ€å¤§æ¨¡å‹ï¼ˆé¢„è®­ç»ƒï¼‰   |      å¤šè¯­è¨€       |   8B   |
|                                 Qwen-Audio-Chat <br> ([â­](examples/industrial_data_pretraining/qwen_audio/demo_chat.py)  [ğŸ¤—](https://huggingface.co/Qwen/Qwen-Audio-Chat) )                                  | éŸ³é¢‘æ–‡æœ¬å¤šæ¨¡æ€å¤§æ¨¡å‹ï¼ˆchatç‰ˆæœ¬ï¼‰ |      å¤šè¯­è¨€       |   8B   |
|                        emotion2vec+large <br> ([â­](https://modelscope.cn/models/iic/emotion2vec_plus_large/summary)  [ğŸ¤—](https://huggingface.co/emotion2vec/emotion2vec_plus_large) )                        |    æƒ…æ„Ÿè¯†åˆ«æ¨¡å‹          | 40000å°æ—¶ï¼Œ4ç§æƒ…æ„Ÿç±»åˆ« |  300M  |
